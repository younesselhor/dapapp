import{a as ye}from"./chunk-5ZL27Y2O.js";import{a as he}from"./chunk-DDKRERBH.js";import{b as A}from"./chunk-4NGVD3RA.js";import{d as U,h as le,k as me,l as de,m as ce,o as pe}from"./chunk-P6ZECFOZ.js";import{Bb as o,Ca as B,Cb as x,Db as u,Eb as V,Ec as ue,Fb as re,Fc as f,Ga as s,Gc as fe,Hc as ge,La as g,Lc as xe,Pc as be,Qa as b,Qc as _e,Rb as oe,Rc as ve,S as J,Sb as ae,Va as p,X as Q,_c as L,a as F,ab as l,ad as H,b as P,da as E,ea as I,eb as O,fa as C,fb as ee,ga as w,gb as N,ib as te,jb as ne,kb as t,lb as i,mb as c,mc as M,nb as _,nc as k,ob as v,qb as T,rb as y,sb as m,tc as se,vb as ie,wc as h}from"./chunk-K7YOXWAC.js";function we(r,n){if(r&1&&c(0,"img",36),r&2){let e=m();l("src",e.currentUser==null?null:e.currentUser.profile_picture,B)}}function Ee(r,n){if(r&1&&(t(0,"div",37),o(1),i()),r&2){let e=m();s(),u(" ",(e.currentUser==null||e.currentUser.first_name==null?null:e.currentUser.first_name.charAt(0))||""," ")}}function Ie(r,n){if(r&1&&c(0,"img",38),r&2){let e=m();l("src",e.currentUser==null?null:e.currentUser.profile_picture,B)}}var R=class r{constructor(n){this.auth=n}user=null;user2;currentUser;savedVehicle={type:"Main Bike",model:"KLX230 R",year:2021,make:"Kawasaki"};ngOnInit(){this.auth.userProfile$.subscribe(n=>{this.currentUser=n?.user})}static \u0275fac=function(e){return new(e||r)(g(A))};static \u0275cmp=b({type:r,selectors:[["app-profile-card"]],decls:68,vars:10,consts:[[1,"grid","grid-cols-1","md:grid-cols-2","gap-6"],[1,"bg-white","rounded-lg","shadow","p-4","md:p-6"],[1,"flex","flex-col","sm:flex-row","items-center","gap-4","sm:gap-6"],[1,"flex-shrink-0"],[1,"w-20","h-20","sm:w-24","sm:h-24","rounded-full","overflow-hidden","bg-blue-100","flex","items-center","justify-center"],["alt","Profile","class","w-full h-full object-cover",3,"src",4,"ngIf"],["class","w-full h-full flex items-center justify-center bg-blue-500 text-white text-xl sm:text-2xl font-bold",4,"ngIf"],[1,"flex-1","w-full"],[1,"flex","flex-col","sm:flex-row","sm:items-start","sm:justify-between","gap-2"],[1,"text-lg","sm:text-xl","font-bold","text-center","sm:text-left"],[1,"text-gray-600","text-sm","sm:text-base","text-center","sm:text-left"],[1,"flex","justify-center","sm:justify-end"],["alt","Flag","class","w-6 h-6 object-cover rounded",3,"src",4,"ngIf"],[1,"flex","justify-between","sm:justify-start","sm:gap-8","mt-4"],[1,"text-center"],[1,"text-sm","sm:text-base","font-bold"],[1,"text-xs","sm:text-sm","text-gray-600"],[1,"flex","flex-col","sm:flex-row","gap-3","mt-4"],[1,"text-white","px-4","py-2","rounded","hover:bg-red-600","flex","items-center","justify-center","gap-2",2,"background","linear-gradient(90deg, #F03D24 0%, #8A2315 100%)"],["src","/pictures/bitcoin-icons_verify-outline.svg","alt","Verified Icon",1,"w-5","h-5","sm:w-6","sm:h-6"],[1,"text-sm","sm:text-base"],[1,"border","border-gray-300","px-4","py-2","rounded","hover:bg-gray-100","text-sm","sm:text-base"],[1,"flex","justify-between","items-center","mb-4"],[1,"flex","items-center","gap-2"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 20 20","fill","currentColor",1,"h-5","w-5","sm:h-6","sm:w-6","text-red-500"],["d","M11 17a1 1 0 001.447.894l4-2A1 1 0 0017 15V9.236a1 1 0 00-1.447-.894l-4 2a1 1 0 00-.553.894V17zM15.211 6.276a1 1 0 000-1.788l-4.764-2.382a1 1 0 00-.894 0L4.789 4.488a1 1 0 000 1.788l4.764 2.382a1 1 0 00.894 0l4.764-2.382zM4.447 8.342A1 1 0 003 9.236V15a1 1 0 00.553.894l4 2A1 1 0 009 17v-5.764a1 1 0 00-.553-.894l-4-2z"],[1,"text-lg","sm:text-xl","font-bold"],["href","#",1,"text-sm","sm:text-base","text-red-600","hover:text-red-800"],["viewBox","0 0 24 24","fill","none","xmlns","http://www.w3.org/2000/svg",1,"h-14","w-14","sm:h-16","sm:w-16","text-red-500"],["d","M12 19C15.866 19 19 15.866 19 12C19 8.13401 15.866 5 12 5C8.13401 5 5 8.13401 5 12C5 15.866 8.13401 19 12 19Z","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],["d","M12 15C13.6569 15 15 13.6569 15 12C15 10.3431 13.6569 9 12 9C10.3431 9 9 10.3431 9 12C9 13.6569 10.3431 15 12 15Z","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],[1,"flex-1","text-center","sm:text-left"],[1,"text-sm","sm:text-base","text-gray-600"],[1,"text-sm","sm:text-base","font-medium"],[1,"flex","flex-col","sm:flex-row","justify-center","gap-3","mt-4"],[1,"border","border-gray-300","px-3","py-1","sm:px-4","sm:py-2","rounded","hover:bg-gray-100","text-sm","sm:text-base"],["alt","Profile",1,"w-full","h-full","object-cover",3,"src"],[1,"w-full","h-full","flex","items-center","justify-center","bg-blue-500","text-white","text-xl","sm:text-2xl","font-bold"],["alt","Flag",1,"w-6","h-6","object-cover","rounded",3,"src"]],template:function(e,a){e&1&&(t(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4),p(5,we,1,1,"img",5)(6,Ee,2,1,"div",6),i()(),t(7,"div",7)(8,"div",8)(9,"div")(10,"h2",9),o(11),i(),t(12,"p",10),o(13),i()(),t(14,"div",11),p(15,Ie,1,1,"img",12),i()(),t(16,"div",13)(17,"div",14)(18,"div",15),o(19,"0"),i(),t(20,"div",16),o(21,"Posts"),i()(),t(22,"div",14)(23,"div",15),o(24,"0"),i(),t(25,"div",16),o(26,"Followers"),i()(),t(27,"div",14)(28,"div",15),o(29,"0"),i(),t(30,"div",16),o(31,"Following"),i()(),t(32,"div",14)(33,"div",15),o(34,"0"),i(),t(35,"div",16),o(36,"Total Likes"),i()()(),t(37,"div",17)(38,"button",18),c(39,"img",19),t(40,"span",20),o(41,"Verify Your Account"),i()(),t(42,"button",21),o(43," Edit Details "),i()()()()(),t(44,"div",1)(45,"div",22)(46,"div",23),C(),t(47,"svg",24),c(48,"path",25),i(),w(),t(49,"h2",26),o(50,"Saved Vehicles"),i()(),t(51,"a",27),o(52,"Show All"),i()(),t(53,"div",2)(54,"div",3),C(),t(55,"svg",28),c(56,"path",29)(57,"path",30),i()(),w(),t(58,"div",31)(59,"p",32),o(60),i(),t(61,"p",33),o(62),i()()(),t(63,"div",34)(64,"button",35),o(65," Shop Your Bike "),i(),t(66,"button",35),o(67," Edit Main Bike "),i()()()()),e&2&&(s(5),l("ngIf",a.currentUser==null?null:a.currentUser.profile_picture),s(),l("ngIf",!(a.currentUser!=null&&a.currentUser.profile_picture)),s(5),V("",a.currentUser==null?null:a.currentUser.first_name," ",a.currentUser==null?null:a.currentUser.last_name,""),s(2),u("Email: ",a.currentUser==null?null:a.currentUser.email,""),s(2),l("ngIf",a.currentUser==null?null:a.currentUser.profile_picture),s(45),x(a.savedVehicle.type),s(2),re("",a.savedVehicle.year," ",a.savedVehicle.make," ",a.savedVehicle.model,""))},dependencies:[h,k],encapsulation:2})};var Me=(r,n)=>n.id;function ke(r,n){r&1&&(t(0,"div",1),c(1,"div",5),i())}function Ae(r,n){if(r&1&&(t(0,"div",2),o(1),t(2,"button",6),o(3,"Try again"),i()()),r&2){let e=m();s(),u(" ",e.error," ")}}function De(r,n){r&1&&(t(0,"div",3)(1,"div",7),c(2,"img",8),i(),t(3,"h2",9),o(4,"No items added to your wish list"),i(),t(5,"p",10),o(6,"You can add products to your wish list and get back here to keep them all in one place"),i(),t(7,"button",11),o(8," Start Shopping "),i()())}function Fe(r,n){if(r&1&&(t(0,"span",26),o(1),i()),r&2){let e=m().$implicit;s(),u("SAR ",e.minimum_bid,"")}}function Pe(r,n){if(r&1&&(t(0,"div",12)(1,"button",13),C(),t(2,"svg",14),c(3,"path",15),i()(),w(),t(4,"div",16),c(5,"img",17),i(),t(6,"div",18)(7,"div",19)(8,"span",20),o(9),i(),t(10,"span",21),o(11,"\u2605"),i()(),t(12,"h3",22),o(13),i(),t(14,"div",23)(15,"div",24)(16,"span",25),o(17),i(),p(18,Fe,2,1,"span",26),i()()()()),r&2){let e=n.$implicit;s(5),ie("alt",e.title),l("src",e.images[0].image_url||"/pictures/hondablur1.png",B),s(4),x((e.rating==null?null:e.rating.toFixed(1))||"4.8"),s(4),u(" ",e.title," "),s(4),u("SAR ",e.price,""),s(),N(e.minimum_bid&&e.minimum_bid!=="0.00"?18:-1)}}function Ve(r,n){if(r&1&&(t(0,"div",4),te(1,Pe,19,6,"div",12,Me),i()),r&2){let e=m();s(),ne(e.listingarray)}}var G=class r{constructor(n,e){this.auth=n;this.listingService=e}listingarray=[];loading=!0;error="";ngOnInit(){this.getwishlist()}getwishlist(){this.listingService.getWishlist().subscribe({next:n=>{n&&n.data&&Array.isArray(n.data)?this.listingarray=n.data.map(e=>e.listing):this.listingarray=[],this.loading=!1},error:n=>{console.error("Error fetching wishlist:",n),this.listingarray=[],this.error="Failed to load wishlist items.",this.loading=!1}})}static \u0275fac=function(e){return new(e||r)(g(A),g(he))};static \u0275cmp=b({type:r,selectors:[["app-saved-vehicles"]],decls:5,vars:1,consts:[[1,"container","mx-auto","px-4","py-6","cardclass"],[1,"flex","justify-center","py-8"],[1,"bg-red-100","text-red-700","p-4","rounded","mb-4"],[1,"flex","flex-col","items-center","justify-center","py-16","px-4"],[1,"grid","grid-cols-1","sm:grid-cols-2","md:grid-cols-3","lg:grid-cols-4","gap-6"],[1,"animate-spin","rounded-full","h-8","w-8","border-t-2","border-b-2","border-blue-500"],[1,"ml-2","underline"],[1,"bg-orange-50","rounded-full","p-8","mb-6"],["src","/pictures/squarfav.png","alt",""],[1,"text-xl","font-medium","text-gray-900","mb-2"],[1,"text-gray-600","text-center","mb-6"],["routerLink","/home","routerLinkActive","router-link-active",1,"bg-red-500","hover:bg-red-600","text-white","font-medium","rounded","px-6","py-3"],[1,"border","border-gray-200","rounded-lg","p-3","relative","hover:shadow-md","transition-shadow","flex","flex-col","h-full"],[1,"absolute","top-2.5","right-2.5","text-red-500","hover:text-red-600","z-10"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 24 24","fill","currentColor",1,"h-5","w-5"],["d","M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"],[1,"mb-2","flex","justify-center","items-center","h-48","p-2","bg-gray-50","rounded"],[1,"max-h-full","max-w-full","object-contain",3,"src","alt"],[1,"flex","flex-col","flex-grow","px-1"],[1,"flex","items-center","mb-1","gap-0.5"],[1,"text-sm","font-medium"],[1,"text-yellow-400","text-sm"],[1,"text-sm","font-medium","mb-1.5","line-clamp-2","min-h-[2.5rem]","leading-tight","overflow-hidden"],[1,"mt-auto"],[1,"flex","items-baseline","gap-1.5"],[1,"font-bold","text-gray-900","text-sm"],[1,"text-xs","text-gray-500","line-through"]],template:function(e,a){e&1&&(t(0,"div",0),p(1,ke,2,0,"div",1)(2,Ae,4,1,"div",2)(3,De,9,0,"div",3)(4,Ve,3,0,"div",4),i()),e&2&&(s(),N(a.loading?1:a.error?2:a.listingarray.length===0?3:4))},dependencies:[h,pe,de,ce],styles:[".cardclass[_ngcontent-%COMP%]{display:flex;padding-bottom:24px;flex-direction:column;justify-content:center;align-items:center;gap:48px;align-self:stretch;border-radius:8px;border:1px solid var(--Gray-200, #E4E7EC)}.details-card[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:flex-start;flex:1 0 0;align-self:stretch;border-radius:3.688px;border:.922px solid var(--Gray-200, #E4E7EC);background:#fff}"]})};function Ne(r,n){r&1&&(t(0,"span",7),o(1,"\u2714\uFE0F"),i())}function Be(r,n){r&1&&(t(0,"span",7),o(1,"\u2714\uFE0F"),i())}var z=class r{constructor(n,e){this.fb=n;this.auth=e;this.profileForm=this.fb.group({firstName:["",f.required],lastName:["",f.required],email:["",[f.required,f.email]],birthday:this.fb.group({day:["",f.compose([f.required,f.min(1),f.max(31)])],month:["",f.compose([f.required,f.min(1),f.max(12)])],year:["",f.compose([f.required,f.min(1900),f.max(new Date().getFullYear())])]}),phone:["+966 34832431",f.required]})}userInfo=null;profileForm;loading=!0;error="";ngOnInit(){this.auth.userProfile$.subscribe({next:n=>{if(n&&n.user){if(this.userInfo=n.user,this.profileForm.patchValue({firstName:this.userInfo.first_name||"",lastName:this.userInfo.last_name||"",email:this.userInfo.email||"",phone:this.userInfo.phone||"",birthday:{day:"",month:"",year:""}}),this.userInfo.birthday){let e=new Date(this.userInfo.birthday);this.profileForm.patchValue({birthday:{day:e.getDate().toString(),month:(e.getMonth()+1).toString(),year:e.getFullYear().toString()}})}}else this.userInfo=null},error:n=>{console.error("Error reading user profile from stream:",n),this.userInfo=null,this.error="Failed to load wishlist items.",this.loading=!1}})}padZero(n){return n.toString().padStart(2,"0")}get birthdayGroup(){return this.profileForm.get("birthday")}onSubmit(){if(this.profileForm.invalid){this.profileForm.markAllAsTouched(),console.warn("Form invalid:",this.profileForm.value);return}let n=this.profileForm.value,e=`${n.birthday.year}-${this.padZero(n.birthday.month)}-${this.padZero(n.birthday.day)}`,a={first_name:n.firstName,last_name:n.lastName,email:n.email,phone:n.phone,birthday:e};this.auth.updateUser(a).subscribe({next:d=>{this.auth.fetchUserProfile(),alert("Profile updated successfully!")},error:d=>{console.error("Error updating user:",d)}})}static \u0275fac=function(e){return new(e||r)(g(L),g(A))};static \u0275cmp=b({type:r,selectors:[["app-settings"]],decls:34,vars:3,consts:[[1,"max-w-xl","mx-auto","p-6","space-y-6","bg-white","rounded",3,"ngSubmit","formGroup"],[1,"grid","grid-cols-2","gap-4"],[1,"block","text-sm","font-medium","text-gray-700","mb-1"],["formControlName","firstName",1,"w-full","border","border-gray-300","rounded","px-3","py-2","focus:outline-none","focus:ring","focus:ring-blue-500"],["formControlName","lastName",1,"w-full","border","border-gray-300","rounded","px-3","py-2","focus:outline-none","focus:ring","focus:ring-blue-500"],[1,"relative"],["formControlName","email",1,"w-full","border","border-gray-300","rounded","px-3","py-2","pr-10","focus:outline-none","focus:ring","focus:ring-blue-500"],[1,"absolute","right-3","top-1/2","-translate-y-1/2","text-green-500"],["formGroupName","birthday"],[1,"grid","grid-cols-3","gap-3"],["formControlName","day","placeholder","DD",1,"border","border-gray-300","rounded","px-3","py-2","focus:outline-none","focus:ring","focus:ring-blue-500"],["formControlName","month","placeholder","MM",1,"border","border-gray-300","rounded","px-3","py-2","focus:outline-none","focus:ring","focus:ring-blue-500"],["formControlName","year","placeholder","YYYY",1,"border","border-gray-300","rounded","px-3","py-2","focus:outline-none","focus:ring","focus:ring-blue-500"],["formControlName","phone",1,"w-full","border","border-gray-300","rounded","px-3","py-2","pr-10","focus:outline-none","focus:ring","focus:ring-blue-500"],[1,"text-xs","text-gray-500","mt-1"],[1,"text-center"],["type","submit",1,"bg-teal-900","hover:bg-teal-800","text-white","font-semibold","px-6","py-2","rounded",2,"width","302px","height","56px","background-color","#032c40"]],template:function(e,a){if(e&1&&(t(0,"form",0),y("ngSubmit",function(){return a.onSubmit()}),t(1,"div",1)(2,"div")(3,"label",2),o(4,"First Name"),i(),c(5,"input",3),i(),t(6,"div")(7,"label",2),o(8,"Last Name"),i(),c(9,"input",4),i()(),t(10,"div")(11,"label",2),o(12,"Email Address"),i(),t(13,"div",5),c(14,"input",6),p(15,Ne,2,0,"span",7),i()(),t(16,"div",8)(17,"label",2),o(18,"Birthday"),i(),t(19,"div",9),c(20,"input",10)(21,"input",11)(22,"input",12),i()(),t(23,"div")(24,"label",2),o(25,"Phone Number"),i(),t(26,"div",5),c(27,"input",13),p(28,Be,2,0,"span",7),i(),t(29,"p",14),o(30," A primary way to login to your account "),i()(),t(31,"div",15)(32,"button",16),o(33," Edit "),i()()()),e&2){let d,S;l("formGroup",a.profileForm),s(15),N((d=a.profileForm.get("email"))!=null&&d.valid?15:-1),s(13),N((S=a.profileForm.get("phone"))!=null&&S.valid?28:-1)}},dependencies:[H,xe,ue,fe,ge,be,ve,_e,h],encapsulation:2})};var q=class r{constructor(n){this.http=n}baseUrl="https://be.dabapp.co/api/";addCard(n){return this.http.post(this.baseUrl+"my-cards",n)}getCards(){return this.http.get(this.baseUrl+"my-cards")}deleteCard(n){return this.http.delete(`${this.baseUrl}my-cards/${n}`)}setDefaultCard(n){return this.http.patch(`${this.baseUrl}my-cards/${n}/set-default`,{})}getPaymentHistory(){return this.http.get(this.baseUrl+"payments/history/user")}static \u0275fac=function(e){return new(e||r)(Q(U))};static \u0275prov=J({token:r,factory:r.\u0275fac,providedIn:"root"})};function Le(r,n){r&1&&(t(0,"div",6),c(1,"div",7),i())}function He(r,n){if(r&1&&(t(0,"div",8)(1,"div",9)(2,"div",10),C(),t(3,"svg",11),c(4,"path",12),i()(),w(),t(5,"div",13)(6,"h3",14),o(7,"Error"),i(),t(8,"p",15),o(9),i()()()()),r&2){let e=m();s(9),x(e.error)}}function Re(r,n){if(r&1&&(t(0,"div",16)(1,"h2",17),o(2,"Payment Statistics"),i(),t(3,"div",18)(4,"div",19)(5,"div",20)(6,"div",21),C(),t(7,"svg",22),c(8,"path",23),i()(),w(),t(9,"div")(10,"p",24),o(11,"Total Amount"),i(),t(12,"p",25),o(13),i()()()(),t(14,"div",19)(15,"div",20)(16,"div",26),C(),t(17,"svg",27),c(18,"path",28),i()(),w(),t(19,"div")(20,"p",24),o(21,"Completed Payments"),i(),t(22,"p",25),o(23),i()()()(),t(24,"div",19)(25,"div",20)(26,"div",29),C(),t(27,"svg",30),c(28,"path",31),i()(),w(),t(29,"div")(30,"p",24),o(31,"Total Transactions"),i(),t(32,"p",25),o(33),i()()()()()()),r&2){let e=m();s(13),V("",e.statistics.total_amount," ",e.payments[0].currency||"SAR",""),s(10),x(e.statistics.completed_payments),s(10),x(e.statistics.total_payments)}}function $e(r,n){if(r&1&&(t(0,"li",37)(1,"div",38)(2,"div",39)(3,"div",20)(4,"h3",40),o(5),i(),t(6,"span"),o(7),oe(8,"titlecase"),i()(),t(9,"p",41),o(10),i(),t(11,"p",41),o(12),i()(),t(13,"div",42)(14,"p",43),o(15),i(),t(16,"p",41),o(17),i()()(),t(18,"div",44)(19,"div")(20,"p")(21,"span",45),o(22,"Listing Price:"),i(),o(23),i(),t(24,"p")(25,"span",45),o(26,"Payment Method:"),i(),o(27),i()(),t(28,"div")(29,"p")(30,"span",45),o(31,"User:"),i(),o(32),i(),t(33,"p")(34,"span",45),o(35,"Email:"),i(),o(36),i()()()()),r&2){let e=n.$implicit,a=m(2);s(5),x(e.listing.title),s(),ee("ml-3 inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ",a.getStatusClass(e.payment_status),""),s(),u(" ",ae(8,16,e.payment_status)," "),s(3),u("Transaction Ref: ",e.tran_ref,""),s(2),u("Date: ",a.formatDate(e.created_at),""),s(3),V("",e.amount," ",e.currency,""),s(2),u("Cart ID: ",e.cart_id,""),s(6),V(" ",e.listing.price," ",e.currency,""),s(4),u(" ",(e.payment_method==null?null:e.payment_method.name)||"Not specified",""),s(5),V(" ",e.user.first_name," ",e.user.last_name,""),s(4),u(" ",e.user.email,"")}}function Ge(r,n){if(r&1&&(t(0,"div",32)(1,"div",33)(2,"h2",34),o(3,"Payment History"),i()(),t(4,"ul",35),p(5,$e,37,18,"li",36),i()()),r&2){let e=m();s(5),l("ngForOf",e.payments)}}function ze(r,n){r&1&&(t(0,"div",46),C(),t(1,"svg",47),c(2,"path",31),i(),w(),t(3,"h3",48),o(4,"No payment history"),i(),t(5,"p",41),o(6,"Get started by making your first purchase."),i()())}var Y=class r{constructor(n,e,a){this.auth=n;this.fb=e;this.cardService=a}payments=[];statistics=null;loading=!0;error="";ngOnInit(){this.getPaymentHistory()}getPaymentHistory(){this.loading=!0,this.cardService.getPaymentHistory().subscribe({next:n=>{n.success?(this.payments=n.data.payments,this.statistics=n.data.statistics):this.error="Failed to load payment history",this.loading=!1},error:n=>{console.error("Error fetching payment history:",n),this.error="Failed to load payment history",this.loading=!1}})}formatDate(n){return new Date(n).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}getStatusClass(n){switch(n){case"completed":return"bg-green-100 text-green-800";case"pending":return"bg-yellow-100 text-yellow-800";case"failed":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}}static \u0275fac=function(e){return new(e||r)(g(A),g(L),g(q))};static \u0275cmp=b({type:r,selectors:[["app-payment-card-user"]],decls:6,vars:5,consts:[[1,"container","mx-auto","p-4","max-w-6xl"],["class","flex justify-center items-center py-12",4,"ngIf"],["class","bg-red-50 border border-red-200 rounded-md p-4 mb-6",4,"ngIf"],["class","mb-8",4,"ngIf"],["class","bg-white shadow rounded-lg overflow-hidden",4,"ngIf"],["class","text-center py-12",4,"ngIf"],[1,"flex","justify-center","items-center","py-12"],[1,"animate-spin","rounded-full","h-12","w-12","border-b-2","border-red-500"],[1,"bg-red-50","border","border-red-200","rounded-md","p-4","mb-6"],[1,"flex"],[1,"flex-shrink-0"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 20 20","fill","currentColor",1,"h-5","w-5","text-red-400"],["fill-rule","evenodd","d","M10 18a8 8 0 100-16 8 8 0 000 16zM8.28 7.22a.75.75 0 00-1.06 1.06L8.94 10l-1.72 1.72a.75.75 0 101.06 1.06L10 11.06l1.72 1.72a.75.75 0 101.06-1.06L11.06 10l1.72-1.72a.75.75 0 00-1.06-1.06L10 8.94 8.28 7.22z","clip-rule","evenodd"],[1,"ml-3"],[1,"text-sm","font-medium","text-red-800"],[1,"text-sm","text-red-700","mt-1"],[1,"mb-8"],[1,"text-xl","font-semibold","text-gray-900","mb-4"],[1,"grid","grid-cols-1","md:grid-cols-3","gap-4"],[1,"bg-white","rounded-lg","shadow","p-4"],[1,"flex","items-center"],[1,"rounded-full","bg-blue-100","p-3","mr-4"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-6","w-6","text-blue-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"text-sm","font-medium","text-gray-500"],[1,"text-2xl","font-bold","text-gray-900"],[1,"rounded-full","bg-green-100","p-3","mr-4"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-6","w-6","text-green-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M5 13l4 4L19 7"],[1,"rounded-full","bg-gray-100","p-3","mr-4"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-6","w-6","text-gray-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"],[1,"bg-white","shadow","rounded-lg","overflow-hidden"],[1,"px-6","py-4","border-b","border-gray-200"],[1,"text-xl","font-semibold","text-gray-900"],[1,"divide-y","divide-gray-200"],["class","px-6 py-4",4,"ngFor","ngForOf"],[1,"px-6","py-4"],[1,"flex","flex-col","md:flex-row","md:items-center","md:justify-between"],[1,"flex-1"],[1,"text-lg","font-medium","text-gray-900"],[1,"mt-1","text-sm","text-gray-500"],[1,"mt-4","md:mt-0","md:ml-6","md:flex-shrink-0","md:flex","md:flex-col","md:items-end"],[1,"text-lg","font-semibold","text-gray-900"],[1,"mt-4","grid","grid-cols-1","md:grid-cols-2","gap-4","text-sm","text-gray-600"],[1,"font-medium"],[1,"text-center","py-12"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"mx-auto","h-12","w-12","text-gray-400"],[1,"mt-2","text-sm","font-medium","text-gray-900"]],template:function(e,a){e&1&&(t(0,"div",0),p(1,Le,2,0,"div",1)(2,He,10,1,"div",2)(3,Re,34,4,"div",3)(4,Ge,6,1,"div",4)(5,ze,7,0,"div",5),i()),e&2&&(s(),l("ngIf",a.loading),s(),l("ngIf",a.error&&!a.loading),s(),l("ngIf",a.statistics&&!a.loading),s(),l("ngIf",a.payments.length>0&&!a.loading),s(),l("ngIf",a.payments.length===0&&!a.loading&&!a.error))},dependencies:[h,M,k,se,H],encapsulation:2})};function qe(r,n){if(r&1&&(_(0),t(1,"small",11),o(2),i(),v()),r&2){let e=m().$implicit,a=m(2);s(2),u(" Expires in ",a.getDaysLeft(e.submission_date)," days ")}}function Ye(r,n){if(r&1&&(_(0),t(1,"small",12),o(2),i(),v()),r&2){let e=m().$implicit,a=m(2);s(2),u(" Expires in ",a.getDaysLeft(e.submission_date)," day ")}}function Ze(r,n){if(r&1){let e=T();_(0),t(1,"button",13),y("click",function(){E(e);let d=m(3);return I(d.openModal())}),o(2," Submit another soom \u2192 "),i(),v()}}function We(r,n){r&1&&(t(0,"span",14),o(1,"Accepted"),i())}function Ke(r,n){r&1&&(t(0,"span",15),o(1,"Rejected"),i())}function Xe(r,n){if(r&1){let e=T();_(0),t(1,"button",16),y("click",function(){E(e);let d=m().$implicit,S=m(2);return I(S.acceptSoom(d))}),o(2,"\u2713"),i(),t(3,"button",17),y("click",function(){E(e);let d=m().$implicit,S=m(2);return I(S.rejectSoom(d))}),o(4,"\u2717"),i(),v()}}function Je(r,n){if(r&1&&(t(0,"tr",7)(1,"td",8),o(2),c(3,"br"),p(4,qe,3,1,"ng-container",2)(5,Ye,3,1,"ng-container",2)(6,Ze,3,0,"ng-container",2),i(),t(7,"td",8),o(8),i(),t(9,"td",8),o(10),i(),t(11,"td",8),p(12,We,2,0,"span",9)(13,Ke,2,0,"span",10)(14,Xe,5,0,"ng-container",2),i()()),r&2){let e=n.$implicit,a=m(2);s(2),u(" ",e.listing.title," "),s(2),l("ngIf",a.getDaysLeft(e.submission_date)>1),s(),l("ngIf",a.getDaysLeft(e.submission_date)===1),s(),l("ngIf",a.isExpired(e.submission_date)),s(2),x((e.listing.country==null?null:e.listing.country.code)||"N/A"),s(2),u("",e.amount," SAR"),s(2),l("ngIf",e.status==="accepted"),s(),l("ngIf",e.status==="rejected"),s(),l("ngIf",e.status==="pending")}}function Qe(r,n){if(r&1&&(t(0,"div")(1,"table",3)(2,"thead")(3,"tr",4)(4,"th",5),o(5,"Ad Name"),i(),t(6,"th",5),o(7,"Country"),i(),t(8,"th",5),o(9,"Amount"),i(),t(10,"th",5),o(11,"Action"),i()()(),t(12,"tbody"),p(13,Je,15,9,"tr",6),i()()()),r&2){let e=m();s(13),l("ngForOf",e.receivedSooms)}}function et(r,n){if(r&1&&(_(0),t(1,"small",11),o(2),i(),v()),r&2){let e=m().$implicit,a=m(2);s(2),u(" Expires in ",a.getDaysLeft(e.submission_date)," days ")}}function tt(r,n){if(r&1&&(_(0),t(1,"small",12),o(2),i(),v()),r&2){let e=m().$implicit,a=m(2);s(2),u(" Expires in ",a.getDaysLeft(e.submission_date)," day ")}}function nt(r,n){if(r&1){let e=T();_(0),t(1,"button",13),y("click",function(){E(e);let d=m(3);return I(d.openModal())}),o(2," Submit another soom \u2192 "),i(),v()}}function it(r,n){r&1&&(t(0,"span",14),o(1,"Accepted"),i())}function rt(r,n){r&1&&(t(0,"span",15),o(1,"Rejected"),i())}function ot(r,n){r&1&&(t(0,"span",23),o(1,"Pending"),i())}function at(r,n){r&1&&(t(0,"span",24),o(1,"View Seller Info"),i())}function st(r,n){r&1&&(t(0,"span"),o(1,"-"),i())}function lt(r,n){if(r&1&&(t(0,"tr",20)(1,"td",8),o(2),c(3,"br"),p(4,et,3,1,"ng-container",2)(5,tt,3,1,"ng-container",2)(6,nt,3,0,"ng-container",2),i(),t(7,"td",8),o(8),i(),t(9,"td",8),o(10),i(),t(11,"td",8),p(12,it,2,0,"span",9)(13,rt,2,0,"span",10)(14,ot,2,0,"span",21),i(),t(15,"td",8),p(16,at,2,0,"span",22)(17,st,2,0,"span",2),i()()),r&2){let e=n.$implicit,a=m(2);s(2),u(" ",e.listing.title," "),s(2),l("ngIf",a.getDaysLeft(e.submission_date)>1),s(),l("ngIf",a.getDaysLeft(e.submission_date)===1),s(),l("ngIf",a.isExpired(e.submission_date)),s(2),x(e.listing.country==null?null:e.listing.country.code),s(2),u("",e.amount," SAR"),s(2),l("ngIf",e.status==="accepted"),s(),l("ngIf",e.status==="rejected"),s(),l("ngIf",e.status==="pending"),s(2),l("ngIf",e.status==="accepted"),s(),l("ngIf",e.status!=="accepted")}}function mt(r,n){if(r&1&&(t(0,"div")(1,"table",18)(2,"thead")(3,"tr",4)(4,"th",5),o(5,"Ad Name"),i(),t(6,"th",5),o(7,"Country"),i(),t(8,"th",5),o(9,"Amount"),i(),t(10,"th",5),o(11,"Status"),i(),t(12,"th",5),o(13,"Seller Information"),i()()(),t(14,"tbody"),p(15,lt,18,11,"tr",19),i()()()),r&2){let e=m();s(15),l("ngForOf",e.sentSooms)}}var Z=class r{constructor(n){this.http=n}receivedSooms=[];sentSooms=[];currentView="received";showAcceptModal=!1;selectedSoom=null;ngOnInit(){this.fetchReceivedSooms(),this.fetchSentSooms()}toggleView(n){this.currentView=n}fetchReceivedSooms(){this.http.get("https://be.dabapp.co/api/my-listings-sooms").subscribe({next:n=>{this.receivedSooms=n.data},error:n=>{console.error("Error fetching received sooms:",n)}})}fetchSentSooms(){this.http.get("https://be.dabapp.co/api/my-sooms").subscribe({next:n=>{this.sentSooms=n.data},error:n=>{console.error("Error fetching sent sooms:",n)}})}acceptSoom(n){let e=n.id,a=n.listing_id;this.http.patch(`https://be.dabapp.co/api/submissions/${e}/accept`,{}).subscribe({next:()=>{this.receivedSooms=this.receivedSooms.map(d=>d.id===e?P(F({},d),{status:"accepted"}):d.listing_id===a&&d.status==="pending"?P(F({},d),{status:"rejected"}):d)},error:d=>{console.error("Error accepting soom:",d)}})}rejectSoom(n){let e=n.id;this.http.patch(`https://be.dabapp.co/api/submissions/${e}/reject`,{}).subscribe({next:()=>{this.receivedSooms=this.receivedSooms.map(a=>a.id===e?P(F({},a),{status:"rejected"}):a)},error:a=>{console.error("Error rejecting soom:",a),this.receivedSooms=this.receivedSooms.map(d=>d.id===e?P(F({},d),{status:"rejected"}):d)}})}openModal(){}isExpired(n){return this.getDaysLeft(n)<=0}getDaysLeft(n){let e=new Date(n),a=new Date,d=1e3*60*60*24,Ce=new Date(e.getTime()+5*d).getTime()-a.getTime();return Math.max(Math.ceil(Ce/d),0)}openAcceptModal(n){this.selectedSoom=n,this.showAcceptModal=!0}closeModal(){this.showAcceptModal=!1,this.selectedSoom=null}confirmAcceptSoom(){if(!this.selectedSoom)return;let n=this.selectedSoom.id,e=this.selectedSoom.listing_id;this.http.patch(`https://be.dabapp.co/api/submissions/${n}/accept`,{}).subscribe({next:()=>{this.receivedSooms=this.receivedSooms.map(a=>a.id===n?P(F({},a),{status:"accepted"}):a.listing_id===e&&a.status==="pending"?P(F({},a),{status:"rejected"}):a),this.closeModal()},error:a=>{console.error("Error accepting soom:",a)}})}static \u0275fac=function(e){return new(e||r)(g(U))};static \u0275cmp=b({type:r,selectors:[["app-soom-box"]],decls:7,vars:6,consts:[[1,"tabs","flex"],[3,"click"],[4,"ngIf"],[1,"min-w-full","mt-4","border","border-gray-300","text-sm"],[1,"bg-gray-100","text-left"],[1,"p-2","text-gray-500"],["class","border-b border-gray-300",4,"ngFor","ngForOf"],[1,"border-b","border-gray-300"],[1,"p-2"],["class","text-green-600 font-semibold",4,"ngIf"],["class","text-red-500 font-semibold",4,"ngIf"],[1,"text-gray-500"],[1,"text-yellow-500"],[1,"text-blue-600","font-medium","underline","bg-transparent","border-none","cursor-pointer",3,"click"],[1,"text-green-600","font-semibold"],[1,"text-red-500","font-semibold"],[1,"text-green-600","font-bold","mr-2","hover:bg-green-50","px-2","py-1","rounded",3,"click"],[1,"text-red-600","font-bold","hover:bg-red-50","px-2","py-1","rounded",3,"click"],[1,"min-w-full","mt-4","border","text-sm"],["class","border-b",4,"ngFor","ngForOf"],[1,"border-b"],["class","text-gray-500 font-semibold",4,"ngIf"],["class","text-blue-600 font-medium cursor-pointer hover:underline",4,"ngIf"],[1,"text-gray-500","font-semibold"],[1,"text-blue-600","font-medium","cursor-pointer","hover:underline"]],template:function(e,a){e&1&&(t(0,"div",0)(1,"button",1),y("click",function(){return a.toggleView("received")}),o(2," Received "),i(),t(3,"button",1),y("click",function(){return a.toggleView("sent")}),o(4," Sent "),i()(),p(5,Qe,14,1,"div",2)(6,mt,16,1,"div",2)),e&2&&(s(),O(a.currentView==="received"?"px-4 py-2 border-b-2 border-red-500 text-red-500 bg-white":"px-4 py-2 border border-gray-300 text-gray-600 bg-gray-50"),s(2),O(a.currentView==="sent"?"px-4 py-2 border-b-2 border-red-500 text-red-500 bg-white":"px-4 py-2 border border-gray-300 text-gray-600 bg-gray-50"),s(2),l("ngIf",a.currentView==="received"),s(),l("ngIf",a.currentView==="sent"))},dependencies:[h,M,k],encapsulation:2})};function dt(r,n){if(r&1){let e=T();t(0,"tr")(1,"td",2),o(2),i(),t(3,"td",2),o(4),i(),t(5,"td",2),o(6),i(),t(7,"td",2),o(8),i(),t(9,"td",2)(10,"button",4),y("click",function(){let d=E(e).$implicit,S=m();return I(S.continueDraft(d.id))}),o(11," Continue Publishing "),i()()()}if(r&2){let e=n.$implicit;s(2),x(e==null?null:e.title),s(2),x(e==null||e.category==null?null:e.category.name),s(2),x(e==null||e.city==null?null:e.city.name),s(2),x(e==null?null:e.status)}}var W=class r{constructor(n,e){this.listingService=n;this.router=e}drafts=[];ngOnInit(){this.listingService.getDraftListings().subscribe({next:n=>{n&&Array.isArray(n.data)?this.drafts=n.data:(console.warn("Unexpected response format:",n),this.drafts=[])},error:n=>{console.error("Failed to load drafts",n)}})}continueDraft(n){this.router.navigate(["/add-product"],{queryParams:{draftId:n}})}static \u0275fac=function(e){return new(e||r)(g(ye),g(me))};static \u0275cmp=b({type:r,selectors:[["app-draft-product"]],decls:15,vars:1,consts:[[1,"w-full","table-auto"],[1,"bg-gray-100","text-left"],[1,"p-3"],[4,"ngFor","ngForOf"],[1,"bg-blue-600","text-white","px-4","py-2","rounded","hover:bg-blue-700",3,"click"]],template:function(e,a){e&1&&(t(0,"table",0)(1,"thead")(2,"tr",1)(3,"th",2),o(4,"Title"),i(),t(5,"th",2),o(6,"Category"),i(),t(7,"th",2),o(8,"City"),i(),t(9,"th",2),o(10,"Status"),i(),t(11,"th",2),o(12,"Action"),i()()(),t(13,"tbody"),p(14,dt,12,4,"tr",3),i()()),e&2&&(s(14),l("ngForOf",a.drafts))},dependencies:[h,M,le],encapsulation:2})};function ct(r,n){if(r&1){let e=T();t(0,"button",5),y("click",function(){let d=E(e).$implicit,S=m();return I(S.setActiveTab(d))}),o(1),i()}if(r&2){let e=n.$implicit,a=m();O(a.activeTab===e?"border-red-500 text-red-600 whitespace-nowrap py-2 px-1 border-b-2 font-medium text-sm":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 whitespace-nowrap py-2 px-1 border-b-2 font-medium text-sm"),s(),u(" ",e," ")}}function pt(r,n){r&1&&(_(0),c(1,"app-profile-card"),v())}function ut(r,n){r&1&&(_(0),c(1,"app-settings"),v())}function ft(r,n){r&1&&(_(0),c(1,"app-payment-card-user"),v())}function gt(r,n){r&1&&(_(0),c(1,"app-soom-box"),v())}function xt(r,n){r&1&&(_(0),c(1,"app-saved-vehicles"),v())}function bt(r,n){r&1&&(_(0),c(1,"app-draft-product"),v())}var K=class r{tabs=["Home","Settings","SOOM Box","My Ads","Orders","Payment Information","Addresses","My Garage","Wishlist","Draft Posting Add"];activeTab="Home";setActiveTab(n){this.activeTab=n}static \u0275fac=function(e){return new(e||r)};static \u0275cmp=b({type:r,selectors:[["app-account-tabs"]],decls:10,vars:7,consts:[[1,"border-b","border-gray-200"],[1,"flex","space-x-8","overflow-x-auto","py-2","hide-scrollbar"],[3,"class","click",4,"ngFor","ngForOf"],[1,"mt-6"],[4,"ngIf"],[3,"click"]],template:function(e,a){e&1&&(t(0,"div",0)(1,"nav",1),p(2,ct,2,3,"button",2),i()(),t(3,"div",3),p(4,pt,2,0,"ng-container",4)(5,ut,2,0,"ng-container",4)(6,ft,2,0,"ng-container",4)(7,gt,2,0,"ng-container",4)(8,xt,2,0,"ng-container",4)(9,bt,2,0,"ng-container",4),i()),e&2&&(s(2),l("ngForOf",a.tabs),s(2),l("ngIf",a.activeTab==="Home"),s(),l("ngIf",a.activeTab==="Settings"),s(),l("ngIf",a.activeTab==="Payment Information"),s(),l("ngIf",a.activeTab==="SOOM Box"),s(),l("ngIf",a.activeTab==="Wishlist"),s(),l("ngIf",a.activeTab==="Draft Posting Add"))},dependencies:[h,M,k,R,G,z,Y,Z,W],styles:[".hide-scrollbar[_ngcontent-%COMP%]{-ms-overflow-style:none;scrollbar-width:none}.hide-scrollbar[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}"]})};var Se=class r{user={name:"Ashraf Aboulsoud",email:"Ashraf@gmail.com",stats:{posts:10,followers:27,following:12,likes:150}};constructor(){}ngOnInit(){}isMobileMenuOpen=!1;toggleMobileMenu(){this.isMobileMenuOpen=!this.isMobileMenuOpen}static \u0275fac=function(e){return new(e||r)};static \u0275cmp=b({type:r,selectors:[["app-account"]],decls:7,vars:0,consts:[[1,"container","mx-auto","px-4","py-6"],[1,"flex","justify-between","items-center","mb-6"],[1,"text-2xl","font-bold"],[1,"text-red-600","hover:text-red-800"]],template:function(e,a){e&1&&(t(0,"div",0)(1,"div",1)(2,"h1",2),o(3,"My Account"),i(),t(4,"button",3),o(5,"Logout"),i()(),c(6,"app-account-tabs"),i())},dependencies:[K],encapsulation:2})};export{Se as AccountComponent};
