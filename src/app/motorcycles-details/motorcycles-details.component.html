<div
  style="
    display: flex;
    height: 307px;
    background: #fef9e7;
    padding: 80px;
    align-items: flex-start;
    gap: 50px;
    align-self: stretch;
  "
>
  <div class="top-content">
    <div class="top-content-text">
      <span
        style="
          color: var(--gray-900, #18181b);
          font-family: Manrope;
          font-size: 48px;
          font-style: normal;
          font-weight: 700;
          line-height: 66px; /* 137.5% */
        "
        >Sell your bike</span
      >
      <span
        style="
          color: var(--gray-900, #18181b);
          font-family: Manrope;
          font-size: 18px;
          font-style: normal;
          font-weight: 500;
          line-height: 30px; /* 166.667% */
        "
        >Post your motorcycle for sale and get exposure across the whole
        kingdom!</span
      >
    </div>
  </div>
  <div class="top-content-img">
    <img src="pictures/rafiki.svg" alt="rafiki" />
  </div>
</div>
<div class="main-page">
  <div class="main-container">
    <div class="content-container">
      <!-- Side Bar Start - Moved to left side -->
      <div class="sidebar" style="width: 100%">
        <div class="container-sidebar">
          <h2 class="filter-label">FILTERS</h2>
          <div class="list-section">
            <div class="demo-container">
              <div class="filter-section">
                <div class="filter-header" (click)="toggleDigits()">
                  <span class="filter-title">Condition</span>
                  <span class="toggle-icon">{{
                    isDigitsOpen ? "−" : "+"
                  }}</span>
                </div>

                <div class="filter-content" *ngIf="isDigitsOpen">
                  <div class="filter-item">
                    <input
                     class="condition-checkbox"
                      type="checkbox"
                      id="condition-all"
                      name="condition"
                      [checked]="!selectedCondition"
                      (change)="selectedCondition = ''; executeFilter()"
                    />
                    <label for="condition-all">All Conditions</label>
                  </div>
                  <div class="filter-item">
                    <input
                    class="condition-checkbox"
                      type="checkbox"
                      id="condition-new"
                      name="condition"
                      value="new"
                      [checked]="selectedCondition === 'new'"
                      (change)="selectedCondition = 'new'; executeFilter()"
                    />
                    <label for="condition-new">New</label>
                  </div>
                  <div class="filter-item">
                    <input
                     class="condition-checkbox"
                      type="checkbox"
                      id="condition-used"
                      name="condition"
                      value="used"
                      [checked]="selectedCondition === 'used'"
                      (change)="selectedCondition = 'used'; executeFilter()"
                    />
                    <label for="condition-used">Used</label>
                  </div>
                </div>
              </div>
            </div>
    <div class="demo-container">
  <div class="filter-header">
    <span class="filter-title">Brand</span>
    <span class="toggle-icon">−</span>
  </div>

  <div class="search-container">
<input
  type="text"
  class="search-input"
  placeholder="Search by Brand"
  id="brand-search"
  #brandSearchInput
  [(ngModel)]="brandSearchTerm"
  (input)="onBrandSearchChange(brandSearchInput.value)"
/>
    <div class="search-icon">
      <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
        <path
          d="M17.5 17.5L12.5001 12.5M14.1667 8.33333C14.1667 11.555 11.555 14.1667 8.33333 14.1667C5.11167 14.1667 2.5 11.555 2.5 8.33333C2.5 5.11167 5.11167 2.5 8.33333 2.5C11.555 2.5 14.1667 5.11167 14.1667 8.33333Z"
          stroke="#FF6B35"
          stroke-width="1.66667"
          stroke-linecap="round"
          stroke-linejoin="round"
        />
      </svg>
    </div>
    <!-- Optional: Add a clear button -->
    <button 
      *ngIf="brandSearchTerm" 
      type="button" 
      class="clear-search" 
      (click)="clearBrandSearch()"
      style="position: absolute; right: 30px; background: none; border: none; cursor: pointer;"
    >
      ×
    </button>
  </div>

  <div class="brand-list">
    <div class="filter-item" *ngFor="let brand of filteredBrands">
      <input
       class="condition-checkbox"
        type="checkbox"
        [id]="'brand-' + brand.id"
        [checked]="brand.checked"
        (change)="brand.checked = !brand.checked; onBrandChangeFilter()"
        class="brand-checkbox"
      />
      <label [for]="'brand-' + brand.id" class="brand-label">
        <span class="brand-name">{{ brand.name }}</span>
        <span class="count">({{ brand.listings_count }})</span>
      </label>
    </div>
  </div>
</div>
            <div class="demo-container">
              <div class="filter-section">
                <div class="filter-header">
                  <span class="filter-title">Price Range</span>
                </div>

             <div class="price-range-container">
  <div class="slider-container">
    <div class="slider-track"></div>
    <input
      type="range"
      [min]="absoluteMin"
      [max]="absoluteMax"
      [(ngModel)]="priceRange.min"
      (input)="onMinSliderChange($event)"
      class="slider-min"
    />
    <input
      type="range"
      [min]="absoluteMin"
      [max]="absoluteMax"
      [(ngModel)]="priceRange.max"
      (input)="onMaxSliderChange($event)"
      class="slider-max"
    />
  </div>

  <div class="price-inputs">
    <div class="price-input">
      <label>Min</label>
      <input
        type="number"
        [(ngModel)]="priceRange.min"
        [min]="absoluteMin"
        [max]="absoluteMax"
        (change)="onMinInputChange()"
      />
    </div>
    <div class="price-input">
      <label>MAX</label>
      <input
        type="number"
        [(ngModel)]="priceRange.max"
        [min]="absoluteMin"
        [max]="absoluteMax"
        (change)="onMaxInputChange()"
      />
    </div>
  </div>
</div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <!-- Side Bar End -->

      <!-- Main Content Area -->
      <div class="main-content">
        <!-- New Filter Card Section - Now above the products -->
        <div class="filter-card">
          <div class="browse-section">
            <h3>Browse as you wish</h3>
          </div>

          <!-- Tab Buttons - Updated -->
          <div class="tab-buttons">
            <button
              [class.active]="activeTab === 'model'"
              (click)="switchTab('model')"
              class="tab-button"
            >
              Model
            </button>
            <button
              [class.active]="activeTab === 'category'"
              (click)="switchTab('category')"
              class="tab-button"
            >
              Category
            </button>
          </div>
          <div *ngIf="activeTab === 'model'" class="button-group">
            <div class="filter-select">
              <select
                [(ngModel)]="selectedBrand"
                (ngModelChange)="onBrandChange($event)"
                class="brand-select"
              >
                <option value="">Brand</option>
                <option *ngFor="let brand of brands" [value]="brand.id">
                  {{ brand.name }}
                </option>
              </select>
            </div>

            <div class="filter-select">
              <select
                [(ngModel)]="selectedModel"
                (ngModelChange)="onModelChange($event)"
                class="brand-select"
              >
                <option value="">Model</option>
                <option *ngFor="let model of filteredModels" [value]="model.id">
                  {{ model.name }}
                </option>
              </select>
            </div>

            <div class="filter-select">
              <select
                [(ngModel)]="selectedYear"
                (ngModelChange)="onYearChange($event)"
                class="brand-select"
              >
                <option value="">Year</option>
                <option *ngFor="let year of filteredYears" [value]="year.id">
                  {{ year.year }}
                </option>
              </select>
            </div>
          </div>

          <!-- Category Tab Content - NEW -->
          <div *ngIf="activeTab === 'category'" class="category-content">
            <div class="category-grid">
              <div
                *ngFor="let category of categories"
                [class.selected]="category.selected"
                (click)="selectCategory(category.id)"
                class="category-item"
              >
                <div class="category-placeholder"></div>
                <span class="category-name">{{ category.name }}</span>
                <span *ngIf="category.selected" class="category-checkmark"
                  >✔</span
                >
              </div>
            </div>

          </div>
        </div>

        <!-- Products Grid -->
        <div
          *ngIf="!isLoading && motorCyclesDetails.length > 0"
          class="main-cards"
          [class.opacity-100]="!isLoading && motorCyclesDetails.length > 0"
          [class.translate-y-0]="!isLoading && motorCyclesDetails.length > 0"
        >
          <div
            *ngFor="
              let part of motorCyclesDetails;
              trackBy: trackByMotorcycleId;
              let i = index
            "
            class="cards"
            [style.animation-delay]="i * 100 + 'ms'"
            [class.animate-fade-in-up]="!isLoading"
          >
            <!-- Image with Loading State -->
            <div class="product-image relative overflow-hidden">
              <img
                [src]="part.image"
                [alt]="part.title"
                class="w-full h-full object-cover transition-transform duration-300 hover:scale-105"
                (load)="onImageLoad($event)"
                (error)="onImageError($event)"
              />
            </div>

            <!-- Content -->
            <div class="product-content ">
              <!-- Title -->
              <span class="product-title" [title]="part.title">
                {{ truncateText(part.title, 20) }}
              </span>

              <span class="product-brand">
                {{ part.brand }} {{ part.model }} {{ part.year }}
              </span>

              <span class="price-value">{{ part.price }} {{ part.currency || 'SAR' }}</span>

              <div class="location-time-product">
                <span class="location-value">
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    width="24"
                    height="24"
                    viewBox="0 0 24 24"
                    fill="none"
                  >
                    <path
                      fill-rule="evenodd"
                      clip-rule="evenodd"
                      d="M7.05002 6.04987C8.36284 4.73705 10.1434 3.99951 12 3.99951C13.8566 3.99951 15.6372 4.73705 16.95 6.04987C18.2628 7.36269 19.0004 9.14326 19.0004 10.9999C19.0004 12.8565 18.2628 14.637 16.95 15.9499L12 20.8999L7.05002 15.9499C6.39993 15.2998 5.88425 14.5281 5.53242 13.6788C5.1806 12.8295 4.99951 11.9192 4.99951 10.9999C4.99951 10.0806 5.1806 9.17025 5.53242 8.32092C5.88425 7.47159 6.39993 6.69989 7.05002 6.04987ZM12 12.9999C12.5304 12.9999 13.0392 12.7892 13.4142 12.4141C13.7893 12.039 14 11.5303 14 10.9999C14 10.4694 13.7893 9.96073 13.4142 9.58566C13.0392 9.21058 12.5304 8.99987 12 8.99987C11.4696 8.99987 10.9609 9.21058 10.5858 9.58566C10.2107 9.96073 10 10.4694 10 10.9999C10 11.5303 10.2107 12.039 10.5858 12.4141C10.9609 12.7892 11.4696 12.9999 12 12.9999Z"
                      fill="#A7C543"
                    />
                  </svg>
                  {{ part.location?.city }}
                </span>
                <!-- <span class="time-value">{{ part.listing_date }}</span> -->
                <span class="time-value">{{
                  part.listing_date ? (part.listing_date | timeAgo) : ""
                }}</span>
              </div>
              <!-- Price and Button -->
              <div class="product-footer">
                <button class="viewBtn" (click)="viewListing(part.id)">
                  View Bike
                </button>
              </div>
            </div>
          </div>
        </div>
        <app-login-modal
          *ngIf="showLoginModal"
          (close)="closeLoginModal()"
        ></app-login-modal>

    </div>

    </div>
  </div>
</div>




        <!-- Loading State -->
        <!-- <div
        *ngIf="isLoading"
        class="flex-1 flex items-center justify-center min-h-[400px]"
      >
        <div class="text-center">
          <div
            class="inline-block animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mb-4"
          ></div>
          <p class="text-lg font-medium text-gray-600 animate-pulse">
            Loading motorcycles...
          </p>
          <div class="flex justify-center mt-4 space-x-1">
            <div class="w-2 h-2 bg-blue-600 rounded-full animate-bounce"></div>
            <div
              class="w-2 h-2 bg-blue-600 rounded-full animate-bounce"
              style="animation-delay: 0.1s"
            ></div>
            <div
              class="w-2 h-2 bg-blue-600 rounded-full animate-bounce"
              style="animation-delay: 0.2s"
            ></div>
          </div>
        </div>
      </div> -->

        <!-- No Results State -->
        <!-- <div
        *ngIf="!isLoading && motorCyclesDetails.length === 0"
        class="no-results opacity-0 translate-y-4 transition-all duration-500 ease-out"
        [class.opacity-100]="!isLoading && motorCyclesDetails.length === 0"
        [class.translate-y-0]="!isLoading && motorCyclesDetails.length === 0"
      >
        🚫 No motorcycles found matching your filters.
      </div> -->
      