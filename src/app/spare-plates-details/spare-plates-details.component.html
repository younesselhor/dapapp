<div
  style="
    display: flex;
    height: 307px;
    background: #fef9e7;
    padding: 80px;
    align-items: flex-start;
    gap: 50px;
    align-self: stretch;
  "
>
  <div class="top-content">
    <div class="top-content-text">
      <span
        style="
          color: var(--gray-900, #18181b);
          font-family: Manrope;
          font-size: 48px;
          font-style: normal;
          font-weight: 700;
          line-height: 66px; /* 137.5% */
        "
        >Sell your bike</span
      >
      <span
        style="
          color: var(--gray-900, #18181b);
          font-family: Manrope;
          font-size: 18px;
          font-style: normal;
          font-weight: 500;
          line-height: 30px; /* 166.667% */
        "
        >Post your motorcycle for sale and get exposure across the whole
        kingdom!</span
      >
    </div>
  </div>
  <div class="top-content-img">
    <img src="pictures/rafiki.svg" alt="rafiki" />
  </div>
</div>
<div class="main-container">
  <div class="content-container">
    <!-- <app-sidebar></app-sidebar> -->
    <!-- Side Bar Start -->

    <div class="sidebar" style="width: 25%;">
      <h2>FILTERS</h2>

    <div class="filter-section">
  <div class="filter-header" (click)="toggleDigits()">
    <span class="filter-title">Condition</span>
    <span class="toggle-icon">{{ isDigitsOpen ? '−' : '+' }}</span>
  </div>

  <div class="filter-content" *ngIf="isDigitsOpen">
    <div class="checkbox-item">
      <input  class="condition-checkbox" type="checkbox" id="condition-all" name="condition" [checked]="!selectedCondition"
        (change)="selectedCondition = ''; executeFilter()">
      <label for="condition-all">All Conditions</label>
    </div>
    <div class="checkbox-item">
      <input class="condition-checkbox" type="checkbox" id="condition-new" name="condition" value="new" [checked]="selectedCondition === 'new'"
        (change)="selectedCondition = 'new'; executeFilter()">
      <label for="condition-new">New</label>
    </div>
    <div class="checkbox-item">
      <input class="condition-checkbox" type="checkbox" id="condition-used" name="condition" value="used"
        [checked]="selectedCondition === 'used'" (change)="selectedCondition = 'used'; executeFilter()">
      <label for="condition-used">Used</label>
    </div>
  </div>
</div>



<!-- Brand Filter Section -->
<div class="filter-section">
  <div class="filter-header" (click)="toggleCountry()">
     <span class="filter-title">Brand</span>
    <span class="toggle-icon">{{ isCountryOpen ? '−' : '+' }}</span>
  </div>

  <div class="filter-content" *ngIf="isCountryOpen">
    <!-- Brand search input -->
   <div class="search-box">
  <input type="text" placeholder="Search brands..." [(ngModel)]="searchBrandTerm" 
         (input)="displayCount = 6; applyFilters()">
  <svg class="search-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 30 30" fill="none">
    <path d="M25.8648 23.122L20.4231 17.6803C21.2439 16.3339 21.7162 14.7499 21.7162 13.0579C21.7162 8.1374 17.4523 3.875 12.5319 3.875C7.61138 3.875 3.62402 7.86236 3.62402 12.7828C3.62402 17.7019 7.88786 21.9657 12.8069 21.9657C14.4442 21.9657 15.9749 21.5208 17.2925 20.7504L22.7631 26.2238C23.2987 26.758 24.1671 26.758 24.7013 26.2238L26.0592 24.8659C26.5935 24.3316 26.3991 23.6563 25.8648 23.122ZM6.36578 12.7828C6.36578 9.3758 9.12626 6.61532 12.5319 6.61532C15.9375 6.61532 18.9744 9.6494 18.9744 13.0579C18.9744 16.4635 16.2125 19.2254 12.8069 19.2254C9.4013 19.2254 6.36578 16.1884 6.36578 12.7828Z" fill="#FA4C06"/>
  </svg>
</div>

    <!-- Brand list with scroll -->
    <div class="scrollable-list">
      <div class="checkbox-item" *ngFor="let brand of filteredBrands">
        <input  class="condition-checkbox" type="checkbox" [id]="'brand-' + brand.id" [checked]="brand.checked"
               (change)="brand.checked = !brand.checked;  onBrandChangecheck()">
        <label [for]="'brand-' + brand.id">
          {{ brand.name }} <span class="count">({{ brand.listings_count}})</span>
        </label>
      </div>
    </div>

    <!-- Show more button -->
    <button class="show-more-btn" *ngIf="bikePartsBrand.length > displayCount" 
            (click)="showMoreBrands()">
      Show More Brands
    </button>
  </div>
</div>

<!-- Category Filter Section -->
<div class="filter-section">
  <div class="filter-header" (click)="toggleCategory()">
     <span class="filter-title">Categories</span>
    <span class="toggle-icon">{{ isCategoryOpen ? '−' : '+' }}</span>
  </div>

  <div class="filter-content" *ngIf="isCategoryOpen">
    <!-- Category search input -->
    <div class="search-box">
      <input type="text" placeholder="Search categories..." [(ngModel)]="searchCategoryTerm"
             (input)="displayCount = 6">
               <svg class="search-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 30 30" fill="none">
    <path d="M25.8648 23.122L20.4231 17.6803C21.2439 16.3339 21.7162 14.7499 21.7162 13.0579C21.7162 8.1374 17.4523 3.875 12.5319 3.875C7.61138 3.875 3.62402 7.86236 3.62402 12.7828C3.62402 17.7019 7.88786 21.9657 12.8069 21.9657C14.4442 21.9657 15.9749 21.5208 17.2925 20.7504L22.7631 26.2238C23.2987 26.758 24.1671 26.758 24.7013 26.2238L26.0592 24.8659C26.5935 24.3316 26.3991 23.6563 25.8648 23.122ZM6.36578 12.7828C6.36578 9.3758 9.12626 6.61532 12.5319 6.61532C15.9375 6.61532 18.9744 9.6494 18.9744 13.0579C18.9744 16.4635 16.2125 19.2254 12.8069 19.2254C9.4013 19.2254 6.36578 16.1884 6.36578 12.7828Z" fill="#FA4C06"/>
  </svg>
    </div>

    <!-- Category list with scroll -->
    <div class="scrollable-list">
      <div class="checkbox-item" *ngFor="let category of filteredCategories">
        <input  class="condition-checkbox" type="checkbox" [id]="'category-' + category.id" [checked]="category.checked"
               (change)="category.checked = !category.checked; onCategoryChange()">
        <label [for]="'category-' + category.id">
          {{ category.name }} <span class="count">({{ category.listings_count}})</span>
        </label>
      </div>
    </div>

    <!-- Show more button -->
    <button class="show-more-btn" *ngIf="bikePartsCatg.length > displayCount" 
            (click)="showMoreCategories()">
      Show More Categories
    </button>
  </div>
</div>
<div class="filter-section">
  <div class="filter-header">
     <span class="filter-title">Price Range</span>
  </div>

  <div class="price-range">
    <div class="slider-container">
      <input type="range" [min]="absoluteMin" [max]="absoluteMax" [(ngModel)]="priceRange.min"
        (input)="onMinSliderChange($event)" class="slider">
      <input type="range" [min]="absoluteMin" [max]="absoluteMax" [(ngModel)]="priceRange.max"
        (input)="onMaxSliderChange($event)" class="slider">
    </div>

    <div class="price-inputs">
      <div class="price-input">
        <label>Min</label>
        <input type="number" [(ngModel)]="priceRange.min" [min]="absoluteMin" [max]="absoluteMax"
          (change)="onMinInputChange()">
      </div>
      <div class="price-input">
        <label>MAX</label>
        <input type="number" [(ngModel)]="priceRange.max" [min]="absoluteMin" [max]="absoluteMax"
          (change)="onMaxInputChange()">
      </div>
    </div>
  </div>
</div>
    </div>
    <!-- Main Content Area -->
    <div class="main-content">
      <!-- New Filter Card Section -->
      <!-- <div class="filter-card-container">
        <div class="filter-card">
          <div class="filter-card-header">
            <h3>Browse as you wish</h3>
            <div class="filter-tags">
              <span class="filter-tag">Model</span>
              <span class="filter-tag">Category</span>
            </div>
          </div>
          
          <div class="filter-controls">
            <div class="filter-select">
              <select>
                <option value="">Brand</option>
                <option *ngFor="let brand of brands" [value]="brand.id">{{ brand.name }}</option>
              </select>
              <span class="check-mark">✔</span>
            </div>
            
            <div class="filter-select">
              <select>
                <option value="">Model</option>
              </select>
              <span class="check-mark">✔</span>
            </div>
            
            <div class="filter-select">
              <select>
                <option value="">Year</option>
              </select>
              <span class="check-mark">✔</span>
            </div>
            
            <button class="search-btn">
              Search
            </button>
          </div>
        </div>
      </div> -->

         <div class="filter-card">
          <div class="browse-section">
            <h3>Browse as you wish</h3>
          </div>

          <!-- Tab Buttons - Updated -->
          <div class="tab-buttons">
            <button
              [class.active]="activeTab === 'model'"
              (click)="switchTab('model')"
              class="tab-button"
            >
              Model
            </button>
            <button
              [class.active]="activeTab === 'category'"
              (click)="switchTab('category')"
              class="tab-button"
            >
              Category
            </button>
          </div>


          <div *ngIf="activeTab === 'model'" class="button-group">
            <div class="filter-select">
              <select
                [(ngModel)]="selectedBrand"
                (ngModelChange)="onBrandChange($event)"
                class="brand-select"
              >
                <option value="">Brand</option>
                <option *ngFor="let brand of brands" [value]="brand.id">
                  {{ brand.name }}
                </option>
              </select>
            </div>

            <div class="filter-select">
              <select
                [(ngModel)]="selectedModel"
                (ngModelChange)="onModelChange($event)"
                class="model-select"
              >
                <option value="">Model</option>
                <option *ngFor="let model of filteredModels" [value]="model.id">
                  {{ model.name }}
                </option>
              </select>
            </div>

            <div class="filter-select">
              <select
                [(ngModel)]="selectedYear"
                (ngModelChange)="onYearChange($event)"
                class="year-select"
              >
                <option value="">Year</option>
                <option *ngFor="let year of filteredYears" [value]="year.id">
                  {{ year.year }}
                </option>
              </select>
            </div>
          </div>

          <!-- Category Tab Content - NEW -->
  <div *ngIf="activeTab === 'category'" class="category-content">
  <div class="category-grid">
    <div
      *ngFor="let category of categories"
      [class.selected]="category.selected"
      (click)="selectCategory(category.id)"
      class="category-item"
    >
      <div class="category-placeholder"></div>
      <span class="category-name">{{ category.name }}</span>
      <span class="category-count" *ngIf="category.listings_count">
        ({{ category.listings_count }})
      </span>
      <span *ngIf="category.selected" class="category-checkmark">✔</span>
    </div>
  </div>
</div>
        </div>
    <!-- Side Bar End -->


    <!-- products-grid -->
   <div
          *ngIf="!isLoading && spareParts?.length > 0"
          class="main-cards"
          [class.opacity-100]="!isLoading && spareParts?.length > 0"
          [class.translate-y-0]="!isLoading && spareParts?.length > 0"
        >
          <div
            *ngFor="
              let part of spareParts;
              trackBy: trackBySparePartsId;
              let i = index
            "
            class="cards"
            [style.animation-delay]="i * 100 + 'ms'"
            [class.animate-fade-in-up]="!isLoading"
          >
            <!-- Image with Loading State -->
            <div class="product-image relative overflow-hidden">
              <img
                [src]="part.image"
                [alt]="part.title"
                class="w-full h-full object-cover transition-transform duration-300 hover:scale-105"
                (load)="onImageLoad($event)"
                (error)="onImageError($event)"
              />
            </div>

            <!-- Content -->

                <div class="product-content ">
              <!-- Title -->
              <span class="product-title" [title]="part.title">
                {{ truncateText(part.title, 20) }}
              </span>

              <span class="product-brand">
                {{ part.brand }} {{ part.part_category }} 
              </span>

              <span class="price-value">{{ part.price }} {{ part.currency || 'SAR' }}</span>

              <div class="location-time-product">
                <span class="location-value">
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    width="24"
                    height="24"
                    viewBox="0 0 24 24"
                    fill="none"
                  >
                    <path
                      fill-rule="evenodd"
                      clip-rule="evenodd"
                      d="M7.05002 6.04987C8.36284 4.73705 10.1434 3.99951 12 3.99951C13.8566 3.99951 15.6372 4.73705 16.95 6.04987C18.2628 7.36269 19.0004 9.14326 19.0004 10.9999C19.0004 12.8565 18.2628 14.637 16.95 15.9499L12 20.8999L7.05002 15.9499C6.39993 15.2998 5.88425 14.5281 5.53242 13.6788C5.1806 12.8295 4.99951 11.9192 4.99951 10.9999C4.99951 10.0806 5.1806 9.17025 5.53242 8.32092C5.88425 7.47159 6.39993 6.69989 7.05002 6.04987ZM12 12.9999C12.5304 12.9999 13.0392 12.7892 13.4142 12.4141C13.7893 12.039 14 11.5303 14 10.9999C14 10.4694 13.7893 9.96073 13.4142 9.58566C13.0392 9.21058 12.5304 8.99987 12 8.99987C11.4696 8.99987 10.9609 9.21058 10.5858 9.58566C10.2107 9.96073 10 10.4694 10 10.9999C10 11.5303 10.2107 12.039 10.5858 12.4141C10.9609 12.7892 11.4696 12.9999 12 12.9999Z"
                      fill="#A7C543"
                    />
                  </svg>
                  {{ part.location?.city }}
                </span>
                <!-- <span class="time-value">{{ part.listing_date }}</span> -->
                <span class="time-value">{{
                  part.listing_date ? (part.listing_date | timeAgo) : ""
                }}</span>
              </div>
              <!-- Price and Button -->
              <div class="product-footer">
                <button class="viewBtn" (click)="viewListing(part.id)">
                  View Part
                </button>
              </div>
            </div>
    
          </div>
        </div>

  </div>
</div>

